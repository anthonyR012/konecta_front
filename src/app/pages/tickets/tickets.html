@if(loading()){
<div class="spinner-container">
    <app-spinner></app-spinner>
</div>
}
<main class="main-content">

    <header class="main-header">
        <h1 i18n="@@myTickets">Mis tiquetes</h1>
    </header>
    @if(tickets().length == 0 && !loading()){
        <app-retry [message]="message() ?? 'Sin informaciÃ³n'" (click)="loadTickets()"></app-retry>
    }


    @if(!loading() && tickets().length){
    <section class="data-table">
        <table>
            <thead>
                <tr>
                    <th i18n="@@flight">Vuelo</th>
                    <th i18n="@@locator">Locador</th>
                    <th i18n="@@seats">Sillas</th>
                    <th i18n="@@destination">Destino</th>
                    <th i18n="@@status">Estado</th>
                    <th i18n="@@cancel">Cancelar</th>
                </tr>
            </thead>
            <tbody>
                @for (t of tickets(); track $index) {
                <tr>
                    <td>{{ t.flight?.code }}</td>
                    <td>{{ t.locator }}</td>
                    <td>{{ t.seats }}</td>
                    <td>{{ t.flight?.destination }}</td>
                    <td
                        [ngClass]="{ 'status-pending': t.status === 'reserved', 'status-approved': t.status === 'paid', 'status-rejected': t.status === 'canceled' }">
                        {{ t.status }}
                    </td>
                    @if(t.status === 'reserved'){
                    <td><button class="cancel" (click)="submit(t, 'canceled')" i18n="@@cancel">Cancelar</button></td>
                    }@else if(t.status === 'canceled'){
                    <td><button class="reserved" (click)="submit(t, 'reserved')" i18n="@@reserve">Reservar</button></td>
                    }

                </tr>
                }

            </tbody>
        </table>
    </section>
    }

</main>