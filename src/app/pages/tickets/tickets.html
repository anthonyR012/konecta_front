<main class="main-content">
    <header class="main-header">
        <h1>Mis tiquetes</h1>
    </header>
    @if(loading()){
    <div class="overlay">
        <div class="spinner"></div>
    </div>
    }

    <section class="data-table">
        @if(!loading() && tickets().length){
        <table>
            <thead>
                <tr>
                    <th>Vuelo</th>
                    <th>Locador</th>
                    <th>Sillas</th>
                    <th>Destino</th>
                    <th>Estado</th>
                    <th>Cancelar</th>
                </tr>
            </thead>
            <tbody>
                @for (t of tickets(); track $index) {
                <tr>
                    <td>{{ t.flight?.code }}</td>
                    <td>{{ t.locator }}</td>
                    <td>{{ t.seats }}</td>
                    <td>{{ t.flight?.destination }}</td>
                    <td
                        [ngClass]="{ 'status-pending': t.status === 'reserved', 'status-approved': t.status === 'paid', 'status-rejected': t.status === 'canceled' }">
                        {{ t.status }}
                    </td>
                    <td><button (click)="cancel(t)" [disabled]="t.status !== 'reserved'">Cancelar</button></td>
                </tr>
                }

            </tbody>
        </table>
        }
    </section>
</main>