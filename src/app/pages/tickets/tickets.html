<main class="main-content">
    <header class="main-header">
        <h1>Mis tiquetes</h1>
    </header>
    @if(loading()){
        <app-spinner></app-spinner>
    }

    <section class="data-table">
        @if(!loading() && tickets().length){
        <table>
            <thead>
                <tr>
                    <th>Vuelo</th>
                    <th>Locador</th>
                    <th>Sillas</th>
                    <th>Destino</th>
                    <th>Estado</th>
                    <th>Cancelar</th>
                </tr>
            </thead>
            <tbody>
                @for (t of tickets(); track $index) {
                <tr>
                    <td>{{ t.flight?.code }}</td>
                    <td>{{ t.locator }}</td>
                    <td>{{ t.seats }}</td>
                    <td>{{ t.flight?.destination }}</td>
                    <td
                        [ngClass]="{ 'status-pending': t.status === 'reserved', 'status-approved': t.status === 'paid', 'status-rejected': t.status === 'canceled' }">
                        {{ t.status }}
                    </td>
                    @if(t.status === 'reserved'){
                        <td><button class="cancel" (click)="submit(t, 'canceled')">Cancelar</button></td>
                    }@else if(t.status === 'canceled'){
                        <td><button class="reserved" (click)="submit(t, 'reserved')">Reservar</button></td>
                    }
                    
                </tr>
                }

            </tbody>
        </table>
        }
    </section>
</main>